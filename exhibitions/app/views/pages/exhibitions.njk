{% extends 'layout/default.njk' %}

{% block pageMeta %}
  {% set metaContent = {
    type: 'website',
    title: 'Exhibitions',
    image: temporaryExhibitions[0].image.contentUrl,
    url: pageConfig.canonicalUri,
    description: 'Past and present exhibitions at Wellcome Collection'
  } %}
  {% component 'open-graph', { pageConfig: pageConfig, metaContent: metaContent } %}
  {% component 'twitter-card', { pageConfig: pageConfig, metaContent: metaContent } %}

  <meta name="description" content="{{ metaContent.description }}" />
{% endblock %}

{% block body %}

  <script type="application/ld+json">
    [{% for exhibition in allExhibitions %}
      {% set featuredImage = {contentUrl: exhibition.image.contentUrl} %}
      {% set startDate = exhibition.start if exhibition.start else '2007-06-21T00:00:00+0000' %}
      {% set exhib = exhibition | objectAssign({start: startDate, safeDescription: exhibition.description | safe | striptags, featuredImage: featuredImage}) %}
      {{ exhib | jsonLd('exhibitionLd') | safe }}{{ ',' if not loop.last }}
    {% endfor %}]
</script>

  <div class="row {{ {s:4, m:4, l:4} | spacingClasses({padding: ['top']}) }} ">
    <div class="container">
      <div class="grid">
        {# <div class="{{ {s: 12, m: 12, l: 12, xl: 12} | gridClasses }}">
          <h2 class="{{ {s:'WB5', m:'WB4', l:'WB3'} | fontClasses }}">Temporary Exhibitions</h2>
        </div> #}
          {% for exhibition in temporaryExhibitions %}
            <div class="{{ {s: 12, m: 6} | gridClasses }}">
              {% componentV2 'exhibition-promo', exhibition %}
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
  <div class="row bg-cream {{ {s:4, m:4, l:4} | spacingClasses({padding: ['top']}) }} ">
    <div class="container">
      <div class="grid">
        {# <div class="{{ {s: 12, m: 12, l: 12, xl: 12} | gridClasses }}">
          <h2 class="{{ {s:'WB5', m:'WB4', l:'WB3'} | fontClasses }}">Permanent Exhibitions</h2>
        </div> #}
        {% for exhibition in permanentExhibitions %}
          <div class="{{ {s: 12, m: 6} | gridClasses }}">
            {% componentV2 'exhibition-promo', exhibition %}
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}
