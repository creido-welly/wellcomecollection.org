{% set gallery = 'actions/gallery-link' %}
{% set podcast = 'actions/volume' %}
{% set video = 'actions/play' %}
{#TODO full width variant?#}
{#TODO full width/dark background variant?#}
{#TODO Test with screen reader?#}
<a href="{{ url }}" class="promo  {% if meta.type == 'gallery' or meta.type == 'podcast' or meta.type == 'video' %}promo--{{meta.type}}{% endif %} {% for modifier in modifiers %}promo--{{ modifier }} {% endfor %} ">
  <div class="promo__image-container">
    <img class="promo__image"
      src="{{ image.sources[(image.sources | length) - 1].src }}"
        srcset="{%- for source in image.sources %}
          {{ source.src }} {{ source.size }}w
          {%- if (source !== (image.sources | last)) %}, {%- endif %}
        {%- endfor %}"
        alt="" />

    {% for modifier in modifiers %}
      {% if modifier == 'series' %}
        <svg class="defs-only">
          <filter id="duotone" color-interpolation-filters="sRGB" x="0" y="0" height="100%" width="100%">
            <feColorMatrix type="matrix"
              values="0.90 0 0 0   0.40 
                      0.95 0 0 0  -0.10  
                    -0.20 0 0 0   0.65 
                        0  0 0 1   0" />
          </filter>
        </svg>
        <img class="promo__image-mask" src="{{image.sources[(image.sources | length) - 1].src}}" alt="" />
      {% endif %}
    {% endfor %}

    {% if meta.type == 'gallery' or meta.type == 'podcast' or meta.type == 'video' %}
      <div class="promo__icon-container">
        {% if meta.type == 'gallery' %}
          {% icon gallery %}
        {% elif meta.type == 'podcast' %}
          {% icon podcast %}
        {% elif meta.type == 'video' %}
            {% icon video %}
        {% endif %}
        {% if meta.type == 'gallery' and meta.length %}
          <span class="promo__sr">Gallery with</span> {{ meta.length }} <span class="promo__sr">items</span>
        {% endif %}
        {% if meta.type == 'podcast' or meta.type == 'video' and meta.length %}
          <span class="promo__sr">{% if meta.type == 'podcast' %}Podcast{%else%}Video{% endif %} lasting</span>
          {{ meta.length }} {#TODO timestamp #}
        {% endif %}
      </div>
    {% endif %}
  </div>
  <header class="promo__description">
    {% if meta.type %}
      <span class="promo__type" aria-hidden="true">{{ meta.type }}</span>
    {% endif %}
    <h2 class="promo__title">{{ title }}</h2>
    {% if meta.date %}
      <span class="promo__date">{{ meta.date }}</span>
    {% endif %}
    {% if copy %}
      <span  class="promo__copy">{{ copy }}</span>
    {% endif %}
  </header>
</a>
