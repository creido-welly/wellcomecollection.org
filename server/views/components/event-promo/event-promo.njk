{% if data.sizes %}
  {% set sizes = data.sizes %}
{% else %}
  {% set sizes = '100vw' %}
{% endif %}

<a id="{{model.id}}" href="{{ model.url }}" class="plain-link promo-link bg-cream rounded-top rounded-bottom overflow-hidden flex flex--column">

  {% componentV2 'image', model.image, {}, {lazyload: true, sizesQueries: sizes, defaultSize: data.defaultSize} %}

  <div class="{{- [
      {s:2} | spacingClasses({padding: ['top']}),
      {s:3} | spacingClasses({padding: ['left', 'right']}),
      {s:4} | spacingClasses({padding: ['bottom']})
    ].join(' ') }} flex flex--column flex-1">

      <p class="no-padding {{ {s:2} | spacingClasses({margin: ['bottom']}) }} {{ {s:'HNM5'} | fontClasses }}">
        {% if model.format.shortName %}
          <abbr title="{{ model.format.title }}">{{ model.format.shortName }}</abbr>
        {% else %}
          <span>{{ model.format.title }}</span>
        {% endif %}
        {% if model.audience.title %}
          <span class="border-left-width-1 border-color-pumice {{ {s: 1} | spacingClasses({padding: ['right', 'left']}) }}">
            {{ model.audience.title }}
          </span>
        {% endif %}
      </p>

      <h2 class="promo-link__title {{ {s:'WB5'} | fontClasses }}  {{ {s:0} | spacingClasses({margin: ['top']}) }}">{{ model.title }}</h2>

      {# TODO: add e.g. 'drop in'/'enquire to book'/'ticketed' #}
      {% if model.bookingType %}
        <p class="{{ {s:'HNL4'} | fontClasses }} {{ {s:2} | spacingClasses({margin: ['bottom']}) }} no-padding">
          <span class="border-left-width-1 border-color-pumice {{ {s: 1} | spacingClasses({padding: ['right', 'left']}) }}">
            {{ model.bookingType }}
          </span>
        </p>
      {% endif %}

      {# TODO: add 'fully booked' status when available #}
      <p class="{{ {s:'HNL4'} | fontClasses }} no-padding no-margin">
        <time datetime="{{ model.start }}">{{ model.start | formatDate }}</time>
      </p>
      <p class="{{ {s:'HNL4'} | fontClasses }} {{ {s:2} | spacingClasses({margin: ['bottom']}) }} no-padding">
        <time datetime="{{ model.start }}">{{ model.start | formatTime }}</time>&mdash;<time datetime="{{ model.end }}">{{ model.end | formatTime }}</time>
      </p>

    </div>
</a>
