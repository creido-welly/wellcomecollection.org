{% extends "layout/default.njk" %}
{% set gridCellClasses = 'grid__cell grid__cell--xl6 grid__cell--shift-xl1 grid__cell--l7 grid__cell--m6 grid__cell--shift-m1 grid__cell--s4' %}

{% block body %}
<div class="row row--lead row--lead--l">
  <div class="container">
    <div class="grid">
      <div class="grid__cell grid__cell--shift-l1">
        {% component 'page-description', {title: article.headline, modifiers: ['a']} %}
      </div>
    </div>
  </div>
</div>
{% for media in article.mainMedia %}
  {% if media.weighting == 'leading' %}
    {% component "media-item", { media: media } %}
  {% endif %}
{% endfor %}

<div class="row row--cream">

  {% if article.author %}
  <div class="container">
    <div class="grid">
      <div class="grid__cell grid__cell--xl6 grid__cell--shift-xl1 grid__cell--l7 grid__cell--m6 grid__cell--shift-m1 grid__cell--s4">
        {% component 'author', {
          name: article.author.name,
          twitterHandle: author.twitterHandle,
          image: article.author.image
        } %}
      </div>
    </div>
  </div>
  {% endif %}

  {# TODO combine the above with below - rationalise container grids #}
  <div class="body-content">
    <div class="container">
      <div class="grid grid--dividers">{# TODO what does this do? #}
        <div class="grid__cell grid__cell--xl6 grid__cell--shift-xl1 grid__cell--l7 grid__cell--m6 grid__cell--shift-m1 grid__cell--s4 article__main"> 
        {% block articleBody %}
          {% component 'article-body', { articleBody: article.articleBody | parseBody } %}
        {% endblock %}
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="grid">
      <div class="{{ gridCellClasses }}">
        {% if article.author %}
          {% component 'author', {
            name: article.author.name,
            twitterHandle: article.author.twitterHandle,
            modifiers: ['border-left'],
            description: article.author.description,
            image: article.author.image
          } %}
        {% endif %}
        <hr class="divider" />
      </div>
    </div>
  </div>
  {% endblock %}

  {% if article.tags.length > 0 %}
    <div class="container">
      <div class="grid">
        <div class="{{ gridCellClasses }}">
          {% component 'tags', { tags: article.tags } %}
        </div>
      </div>
    </div>
  {% endif %}
</div>
{% endblock %}
