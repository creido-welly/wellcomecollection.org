{% extends "layout/default.njk" %}

{% block body %}
<div class="row row--lead row--lead--l">
  <div class="container">
    <div class="grid">
      <div class="grid__cell grid__cell--shift-l1">
        {% component 'page-description', {title: article.headline, modifiers: ['a']} %}
      </div>
    </div>
  </div>
</div>
{% for media in article.mainMedia %}
  {% if media.weighting == 'leading' %}
    {% component "media-item", { media: media } %}
  {% endif %}
{% endfor %}

<div class="row row--cream">
  <div class="container">
    <div class="grid">
      <div class="grid__cell grid__cell--xl6 grid__cell--shift-xl1 grid__cell--l7 grid__cell--m6 grid__cell--shift-m1 grid__cell--s4">
        {% component 'author', {
          name: article.author.name,
          twitterHandle: author.twitterHandle,
          image: article.author.image
        } %}
      </div>
    </div>
    {% block articleBody %}
      <div class="body-content">
        {% for bodyPart in article.articleBody | parseBody %}
          <div class="grid grid--dividers grid--flush-dividers">
            {% if bodyPart.type === 'image' %}
              <div class="grid__cell grid__cell--l12 grid__cell--m8, grid__cell--s4">
                {% component 'figure', {
                  type: 'picture',
                  sources: [{src: bodyPart.value.contentUrl, size: bodyPart.value.width}],
                  caption: bodyPart.value.caption,
                  icon: 'other/picture'
                } %}
              </div>
            {% elif bodyPart.type === 'video' %}
              <div class="grid__cell grid__cell--xl6 grid__cell--shift-xl1 grid__cell--l7 grid__cell--m6 grid__cell--shift-m1 grid__cell--s4">
                {% component 'iframed-video', {video: bodyPart.value} %}
              </div>
            {% elif bodyPart.type === 'list' %}
              <div class="grid__cell grid__cell--xl6 grid__cell--shift-xl1 grid__cell--l7 grid__cell--m6 grid__cell--shift-m1 grid__cell--s4">
                {% component 'list', {list: bodyPart.value} %}
              </div>
            {% else %}
              <div class="grid__cell grid__cell--xl6 grid__cell--shift-xl1 grid__cell--l7 grid__cell--m6 grid__cell--shift-m1 grid__cell--s4">
                  {% if loop.index === 1 %}
                    <div class="standfirst">
                        {{bodyPart.value | safe}}
                    </div>
                  {% else %}
                    {{bodyPart.value | safe}}
                  {% endif %}
              </div>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    {% endblock %}
  </div>
</div>
{% endblock %}
