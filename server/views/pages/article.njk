{% extends 'layout/default.njk' %}
{% set gridCellClasses = 'grid__cell grid__cell--xl6 grid__cell--shift-xl1 grid__cell--l7 grid__cell--m6 grid__cell--shift-m1 grid__cell--s4' %}

{% block pageMeta %}
  {% component 'open-graph', { pageConfig: pageConfig, article: article } %}
  {% component 'twitter-card', { pageConfig: pageConfig, article: article } %}
{% endblock %}

{% block body %}
{% component 'page-description', { title: article.headline, meta: { type: 'date', value: article.datePublished | formatDate }, modifiers: ['a'], lead: true } %}


  series {{ article.series[0].commissionedLength }}

{% if article.series[0] and article.series[0].commissionedLength %}
  {% component 'async', { endpoint: '/series-nav/' + article.series[0].url, placeholderClassname: 'series-nav-placeholder' } %}
{% endif %}


{% for media in article.mainMedia %}
  {% if (media.contentUrl) %}
    {% componentV2 'main-media', media, {'full': true} %}
  {% endif %}
{% endfor %}

<div class="row row--cream">
  <div class="container">
    <div class="grid grid--no-gutters">
      <div class="grid__cell grid__cell--s4 grid__cell--m6 grid__cell--shift-m1 grid__cell--l7 grid__cell--xl6 grid__cell--shift-xl1">
        {% if article.author %}
          {% component 'author', {
            name: article.author.name,
            twitterHandle: article.author.twitterHandle,
            modifiers: ['border-bottom'],
            image: article.author.image
          } %}

        {% endif %}

        <div class="article">
          {% block articleBody %}
            {% component 'article-body', { articleBody: article.bodyParts } %}
          {% endblock %}

          {% if article.author %}
            {% component 'author', {
              name: article.author.name,
              twitterHandle: article.author.twitterHandle,
              modifiers: ['border-left'],
              description: article.author.description,
              image: article.author.image
            } %}
          {% endif %}

          <hr class="divider" />

          {% if article.tags.length > 0 %}
            {% component 'tags', { tags: article.tags } %}
          {% endif %}
        </div>

      </div>
    </div>
  </div>
</div>
{% endblock %}
