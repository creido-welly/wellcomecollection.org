{% extends 'layout/default.njk' %}
{% set gridCellClasses = 'grid__cell grid__cell--xl6 grid__cell--shift-xl1 grid__cell--l7 grid__cell--m6 grid__cell--shift-m1 grid__cell--s4' %}

{% block pageMeta %}
  {% component 'open-graph', { pageConfig: pageConfig, article: article } %}
  {% component 'twitter-card', { pageConfig: pageConfig, article: article } %}
{% endblock %}

{% block body %}

{% block seriesNavigation %}
  {% for series in article.series %}
    {% if series.commissionedLength %}
      {% set asyncContentEndpoint = '/series-nav/' + series.url + '?current=' + article.url %}
      {% component 'async', { endpoint: asyncContentEndpoint, component: 'series-nav' } %}
    {% endif %}
  {% endfor %}
{% endblock %}
{% componentV2 'page-description', {title: article.headline, meta: {type: 'date', value: article.datePublished}, lead: true}, {'a': true}, {icon: article.contentType | getIconForContentType} %}

{% set mainMediaData = {
  contentType: article.contentType,
  positionInSeries: article.positionInSeries,
  series: article.series | getCommissionedSeries
} %}

{% componentV2 'main-media', article.mainMedia | getPrincipleMainMedia, {'full': true}, mainMediaData %}

<div class="row row--cream {{ {s:10, m:10, l:10} | spacingClasses({padding: ['top', 'bottom']}) }} ">
  <div class="container">
    <div class="grid grid--no-gutters">
      <div class="grid__cell grid__cell--s4 grid__cell--m6 grid__cell--shift-m1 grid__cell--l7 grid__cell--xl6 grid__cell--shift-xl1">
        {% if article.author %}
          {% component 'author', {
            name: article.author.name,
            twitterHandle: article.author.twitterHandle,
            modifiers: ['border-bottom'],
            image: article.author.image
          } %}

        {% endif %}

        <div class="article">
          {% block articleBody %}
            {% component 'article-body', { articleBody: article.bodyParts } %}
          {% endblock %}

          {% if article.author %}
            {% component 'author', {
              name: article.author.name,
              twitterHandle: article.author.twitterHandle,
              modifiers: ['border-left'],
              description: article.author.description,
              image: article.author.image
            } %}
          {% endif %}

          <hr class="divider divider--stub divider--black {{ {s:4, m:4, l:4} | spacingClasses({margin: ['top']}) }} {{ {s:1, m:1, l:1} | spacingClasses({margin: ['bottom']}) }}" />

          {% if article.tags.length > 0 %}
            {% component 'tags', { tags: article.tags } %}
          {% endif %}
        </div>

      </div>
    </div>
  </div>
</div>

<div class="row row--mobile-only {{ {s:4, m:4, l:4} | spacingClasses({padding: ['top', 'bottom', 'left', 'right'], margin: ['top', 'bottom']}) }}" style="background: #5cb8bf; color: white;">
  <p class="text--white">Don't miss out on the next article in this series. Enter your email and we will notify you when the next part is out.</p>
  <form action="//wellcomecollection.us15.list-manage.com/subscribe/post?u=4c18829323bb4eb8093d7d418&amp;id=e7d5a9c839" method="post" name="mc-embedded-subscribe-form" target="_blank">
    <input type="email" value="" name="EMAIL"
           class="{{ {s:2, m:2, l:2} | spacingClasses({padding: ['top', 'bottom', 'left', 'right'], margin: ['bottom']}) }}"
           style="border: 0; border-bottom: #8f8f8f 2px solid; background: white; width: 100%;" placeholder="you@email.com" required />
    <input type="hidden" name="b_4c18829323bb4eb8093d7d418_e7d5a9c839" tabindex="-1" value="" />
    <button type="submit" class="btn btn--light" style="border-color: black;">
      {%  icon 'actions/email' %}
      Submit
    </button>
  </form>
</div>

{% block transporters %}{% endblock %}
{% endblock %}
